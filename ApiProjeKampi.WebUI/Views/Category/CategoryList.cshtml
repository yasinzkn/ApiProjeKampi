@model List<ResultCategoryDto>

@{
    ViewData["Title"] = "CategoryList";
    Layout = "~/Views/AdminLayout/Index.cshtml";
    int count = 0;
}

<style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="..." crossorigin="anonymous" / >
/* ---------- GLASS THEME GLOBAL ---------- */
.glass-page {
    padding: 28px;
    min-height: 70vh;
    background: linear-gradient(180deg, #f4f7ff 0%, #eef3ff 100%);
    font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif;
    color: #111827;
}

/* Container card with glass effect */
.glass-card {
    background: rgba(255, 255, 255, 0.45);
    border: 1px solid rgba(255,255,255,0.55);
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    border-radius: 18px;
    box-shadow: 0 12px 30px rgba(34,40,80,0.08);
    overflow: hidden;
}

/* Header */
.glass-header {
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 22px 26px;
    border-bottom: 1px solid rgba(255,255,255,0.6);
    background: linear-gradient(180deg, rgba(255,255,255,0.35), rgba(255,255,255,0.22));
}

.glass-title {
    display:flex;
    gap:14px;
    align-items:center;
    font-weight:700;
    color: #0f1724;
    font-size:1.2rem;
}

.glass-title .fa-layer-group {
    color: #6b73ff;
    font-size:1.25rem;
    transform: translateY(-1px);
}

/* Neon create button */
.btn-glass-create {
    display:inline-flex;
    gap:10px;
    align-items:center;
    padding: .65rem 1.15rem;
    border-radius: 12px;
    font-weight:700;
    color: white;
    background: linear-gradient(135deg, rgba(98,255,217,0.95) 0%, rgba(64,194,255,0.95) 100%);
    box-shadow: 0 8px 28px rgba(72, 91, 234, 0.18), 0 2px 8px rgba(64,194,255,0.12);
    border: none;
    text-decoration: none;
    transition: transform .16s ease, box-shadow .16s ease;
}
.btn-glass-create:hover { transform: translateY(-3px); box-shadow: 0 14px 40px rgba(72, 91, 234, 0.22); }

/* Toolbar (search + filters) */
.glass-toolbar {
    display:flex;
    gap:12px;
    align-items:center;
    padding:16px 24px;
    flex-wrap:wrap;
    border-bottom: 1px dashed rgba(15,23,36,0.03);
}

.search-input {
    flex:1 1 280px;
    min-width:180px;
    background: rgba(255,255,255,0.6);
    border: 1px solid rgba(15,23,36,0.04);
    padding:10px 12px;
    border-radius: 12px;
    outline: none;
    font-size: 0.95rem;
}
.search-input:focus {
    box-shadow: 0 6px 20px rgba(75, 85, 255, 0.10);
    border-color: rgba(75,85,255,0.3);
}

/* Table */
.table-glass {
    width:100%;
    border-collapse: separate;
    border-spacing: 0 14px;
    padding: 20px 22px;
}

.table-glass thead th {
    text-align:left;
    color: #4b5563;
    font-size: .78rem;
    text-transform: uppercase;
    letter-spacing: .6px;
    padding:12px 14px;
    font-weight:700;
}

/* Each row as card */
.table-glass tbody tr {
    background: linear-gradient(180deg, rgba(255,255,255,0.75), rgba(255,255,255,0.65));
    border-radius:14px;
    transition: transform .18s ease, box-shadow .18s ease;
    box-shadow: 0 6px 18px rgba(16,24,40,0.04);
    overflow:hidden;
}

/* Hover lift + subtle neon rim */
.table-glass tbody tr:hover {
    transform: translateY(-6px);
    box-shadow: 0 20px 40px rgba(72, 81, 255, 0.12);
}

/* Table cells */
.table-glass td {
    padding: 18px 14px;
    vertical-align: middle;
    border: none;
    font-size: 0.98rem;
}

/* Small index column */
.idx-col { width:56px; font-weight:700; color:#0b1220; }

/* Icon box — slightly transparent */
.icon-glass {
    width:50px; height:50px;
    border-radius:12px;
    display:flex; align-items:center; justify-content:center;
    background: linear-gradient(135deg, rgba(102,126,234,0.95), rgba(118,75,162,0.95));
    color:white; font-size:1.1rem;
    box-shadow: 0 8px 20px rgba(102,126,234,0.18);
}

/* Category name */
.cat-name { font-weight:700; color:#0b1220; font-size:1rem; }

/* Status badge glass */
.badge-glass {
    padding:.45rem .9rem;
    border-radius:22px;
    font-weight:700;
    font-size:.82rem;
    display:inline-flex; gap:8px; align-items:center;
    background: linear-gradient(180deg, rgba(215,245,223,0.9), rgba(183,235,201,0.9));
    color:#0b6b38;
    border: 1px solid rgba(155,231,179,0.6);
}

/* Product count */
.count-badge {
    padding:.45rem .85rem;
    border-radius:20px;
    background: rgba(13,18,25,0.04);
    color:#111827;
    font-weight:600;
}

/* Action buttons (compact neon outlines) */
.row-actions { display:flex; gap:10px; justify-content:center; }

.action-btn {
    padding:.45rem .75rem;
    border-radius:10px;
    font-weight:700;
    font-size:.86rem;
    display:inline-flex; gap:8px; align-items:center;
    text-decoration:none;
    border: 1px solid rgba(255,255,255,0.06);
    transition: transform .12s ease, box-shadow .12s ease;
}

.action-btn i { font-size:0.95rem; }

/* view / edit / delete color variants */
.btn-view {
    background: linear-gradient(135deg, rgba(79,172,254,0.95), rgba(0,242,254,0.95));
    color:white;
    box-shadow: 0 6px 20px rgba(0,200,255,0.09);
}
.btn-edit {
    background: linear-gradient(135deg, rgba(102,126,234,0.95), rgba(118,75,162,0.95));
    color:white;
    box-shadow: 0 6px 20px rgba(102,126,234,0.09);
}
.btn-delete {
    background: linear-gradient(135deg, rgba(255,117,143,0.95), rgba(255,148,114,0.95));
    color:white;
    box-shadow: 0 6px 20px rgba(255,120,120,0.09);
}

/* Responsive: stack cells on smaller screens */
.media (max-width: 880px) {
    .table-glass thead { display:none; }
    .table-glass tbody tr { display:block; padding: 12px; }
    .table-glass tbody td { display:flex; justify-content:space-between; padding:10px 12px; }
    .table-glass tbody td.full-row { display:block; }
    .row-actions { justify-content:flex-end; }
}
</style>

<section class="glass-page">
    <div class="glass-card">

        <!-- HEADER -->
        <div class="glass-header">
            <div class="glass-title">
                <i class="fas fa-layer-group"></i>
                Kategori Yönetimi — Glass UI
            </div>

            <a href="/Category/CreateCategory/" class="btn-glass-create">
                <i class="fas fa-plus"></i> Yeni Kategori
            </a>
        </div>

        <!-- TOOLBAR -->
        <div class="glass-toolbar">
            <input id="catSearch" type="text" class="search-input" placeholder="Kategori ara... (isimle filtrele)" onkeyup="filterCategories()" />
            <div style="display:flex; gap:8px; align-items:center;">
                <select id="statusFilter" class="search-input" style="max-width:180px;" onchange="filterCategories()">
                    <option value="">Tümü</option>
                    <option value="aktif">Aktif</option>
                    <option value="pasif">Pasif</option>
                </select>
                <button onclick="resetFilters()" class="btn-glass-create" style="background:linear-gradient(135deg,#ffd36b,#ff9ec4); color:#111;">
                    <i class="fas fa-undo"></i> Sıfırla
                </button>
            </div>
        </div>

        <!-- TABLE -->
        <div style="padding:18px 20px;">
            <table class="table-glass" id="categoryTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th></th>
                        <th>Kategori Adı</th>
                        <th>Durum</th>
                        <th>Ürün Sayısı</th>
                        <th style="text-align:center;">İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        count++;
                        <tr data-name="@item.CategoryName.ToLower()" data-status="aktif">
                            <td class="idx-col"><strong>@count</strong></td>

                            <td>
                                <div class="icon-glass">
                                    <i class="fas fa-tag"></i>
                                </div>
                            </td>

                            <td class="cat-name">@item.CategoryName</td>

                            <td>
                                <span class="badge-glass"><i class="fas fa-check-circle"></i> Aktif</span>
                            </td>

                            <td>
                                <span class="count-badge"><i class="fas fa-box"></i> @Random.Shared.Next(5, 50) ürün</span>
                            </td>

                            <td class="text-center">
                                <div class="row-actions">
                                    <a class="action-btn btn-view" href="#" title="Görüntüle">
                                        <i class="fas fa-eye"></i> Görüntüle
                                    </a>
                                    <a class="action-btn btn-edit" href="/Category/UpdateCategory/@item.CategoryId/" title="Düzenle">
                                        <i class="fas fa-edit"></i> Düzenle
                                    </a>
                                    <a class="action-btn btn-delete" href="/Category/DeleteCategory/@item.CategoryId/" onclick="return confirm('Bu kategoriyi silmek istediğinize emin misiniz?');" title="Sil">
                                        <i class="fas fa-trash-alt"></i> Sil
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- FOOTER -->
        <div style="padding:14px 22px; border-top: 1px solid rgba(15,23,36,0.03); display:flex; justify-content:space-between; align-items:center;">
            <div style="color:#4b5563;">
                <i class="fas fa-info-circle"></i>
                Toplam <strong style="color:#6b73ff;">@Model.Count</strong> kategori listelendi
            </div>
            <div style="color:#6b7280; font-size:.9rem;">&copy; Kategori Yönetim Paneli</div>
        </div>

    </div>
</section>

<script>
/* Küçük filtreleme (client-side). İsteğe bağlı, server-side filtre de kullanılabilir. */
function filterCategories() {
    const q = document.getElementById('catSearch').value.trim().toLowerCase();
    const status = document.getElementById('statusFilter').value;
    const rows = document.querySelectorAll('#categoryTable tbody tr');

    rows.forEach(r => {
        const name = r.getAttribute('data-name') || '';
        const st = r.getAttribute('data-status') || '';
        const matchesQuery = q === '' || name.includes(q);
        const matchesStatus = status === '' || st === status;
        r.style.display = (matchesQuery && matchesStatus) ? '' : 'none';
    });
}

function resetFilters() {
    document.getElementById('catSearch').value = '';
    document.getElementById('statusFilter').value = '';
    filterCategories();
}

/* Backdrop filter fallback: bazı eski tarayıcılarda blur desteklenmez, o yüzden fallback opaklık ayarı */
(function() {
    const s = window.getComputedStyle(document.body);
    if (!('backdropFilter' in s) && !('-webkit-backdrop-filter' in s)) {
        document.querySelectorAll('.glass-card').forEach(el => {
            el.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.92))';
            el.style.border = '1px solid rgba(220,220,230,0.6)';
        });
    }
})();
</script>

@* <section class="section">
    <div class="section-body">
        <div class="row">
            <div class="col-12 col-md-12 col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <h4>Kategori Listesi</h4>
                    </div>
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Kategori Adı</th>
                                    <th scope="col">Sil</th>
                                    <th scope="col">Güncelle</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    count++;
                                    <tr>
                                        <th scope="row">@count</th>
                                        <td>@item.CategoryName</td>
                                        <td><a href="/Category/DeleteCategory/@item.CategoryId/" class="btn btn-danger">Sil</a></td>
                                        <td><a href="/Category/UpdateCategory/@item.CategoryId/" class="btn btn-success">Güncelle</a></td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    <a href="/Category/CreateCategory/" class="btn btn-info">Yeni Kategori Girişi</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section> *@
